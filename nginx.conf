upstream backend {
    server backend:8000; # 'backend' seria o nome do serviço backend no Docker Compose se usasse Docker Compose, em Docker simples, pode ser localhost:8000 se backend e nginx forem no mesmo container
}

server {
    listen 80;
    server_name _; # Escuta em qualquer nome de domínio

    location /api/ { # Rotas que começam com /api/
        proxy_pass http://backend; # Envia para o backend (FastAPI/Express)
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }

    location / { # Rotas que NÃO começam com /api/ (ou rota raiz /)
        root /app/frontend; # Diretório com os arquivos estáticos do frontend
        index index.html;
        try_files $uri $uri/ /index.html; # Para Single Page Applications (React, Vue, etc.)
    }
}